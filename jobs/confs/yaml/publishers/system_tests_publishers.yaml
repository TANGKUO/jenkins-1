- publisher:
    name: system-tests-common
    publishers:
      - post-tasks:
          - matches:
              - log-text: '.*'
                operator: AND
            escalate-status: true
            script: !include-raw: shell-scripts/system_tests.collect_logs.sh
          - matches:
              - log-text: '.*'
                operator: AND
                escalate-status: true
            script: !include-raw-escape: shell-scripts/mock_cleanup.sh
      - junit:
          results: 'exported-artifacts/nosetests*.xml'
      - archive:
          artifacts: 'exported-artifacts/**'
          allow-empty: true

- publisher:
    name: system-tests
    publishers:
      - system-tests-common:
          version: '{version}'
          suite_type : '{suite_type}'
          chroot_distro: '{chroot_distro}'
      - email-ext:
          recipients: '{email-to}'
          failure: true
          fixed: true
          unstable: true

- publisher:
    name: system-tests-manual
    publishers:
      - system-tests-common:
          version: '{version}'
          suite_type : '{suite_type}'
          chroot_distro: '{chroot_distro}'
      - email-ext:
          always: true
          send-to:
            - requester
