- project:
    name: ovirt-image-uploader_create-rpms
    project:
      - ovirt-image-uploader
    trigger:
      - merged
    version:
      - 3.5:
          branch: ovirt-image-uploader-3.5
          extra-repos: |
            ovirt-3.5-snapshot,http://resources.ovirt.org/pub/ovirt-3.5-snapshot/rpm/$distro
            ovirt-3.5-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.5-snapshot-static/rpm/$distro
    mock-build-type:
      - onlyrpm
    distro:
      - fc19:
          node-filter: 'fc19 || fc20 || el6 || el7'
      - fc20
      - el6
      - el7
    arch:
      - x86_64
    jobs:
      - '{project}_{version}_create-rpms-{distro}-{arch}_{trigger}'

## jjb does not allow discarding variable combination when exploding
## the template, so if we don't want fc19 for branch master, we have to
## create a separated template for it
- project:
    name: ovirt-image-uploader_master_create-rpms
    project:
      - ovirt-image-uploader
    trigger:
      - merged
    version:
      - master:
          extra-repos: |
            ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
            ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
          branch: master
    mock-build-type:
      - onlyrpm
    distro:
      - fc20
      - fc21
      - el6
      - el7
    arch:
      - x86_64
    jobs:
      - '{project}_{version}_create-rpms-{distro}-{arch}_{trigger}'
