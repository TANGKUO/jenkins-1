- project:
    name: vdsm_install-rpm-sanity
    project: vdsm
    trigger: created
    version:
      - master:
          branch: master
      - 3.5:
          branch: ovirt-3.5
    mock-build-type: onlyrpm
    distro:
      - fc20:
          extra-repos: |
              ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
              ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
              glusterfs-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/\\$basearch
              glusterfs-noarch-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/noarch
              fedora-virt-preview,http://fedorapeople.org/groups/virt/virt-preview/fedora-\\$releasever/\\$basearch
      - fc21:
          extra-repos: |
              ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
              ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
              glusterfs-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/\\$basearch
              glusterfs-noarch-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/noarch
              fedora-virt-preview,http://fedorapeople.org/groups/virt/virt-preview/fedora-\\$releasever/\\$basearch
      - fc22:
          extra-repos: |
              ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
              ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
              glusterfs-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/\\$basearch
              glusterfs-noarch-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/noarch
              fedora-virt-preview,http://fedorapeople.org/groups/virt/virt-preview/fedora-\\$releasever/\\$basearch
      - el7:
          extra-repos: |
              ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
              ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
              glusterfs-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/\\$basearch
              glusterfs-noarch-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/noarch
    arch: x86_64
    exclude:
      - version: 3.5
        distro: fc22
      - version: master
        distro: fc20
    jobs:
      - '{project}_{version}_install-rpm-sanity-{distro}_{trigger}':
          trigger-files: 'vdsm.spec.in'
          extra-packages: ''
          extra-rpmbuild-options: |
            'with_check=0'
            'with_hooks=1'
          packages: 'exported-artifacts/vdsm-*rpm'
          env: 'NOSE_EXCLUDE=.*'
