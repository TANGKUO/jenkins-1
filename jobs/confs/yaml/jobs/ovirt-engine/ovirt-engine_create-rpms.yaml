- project:
    name: ovirt_engine_create-rpms
    project: ovirt-engine
    trigger: merged
    version: master
    branch: master
    mock-build-type: all
    distro:
      - fc22:
          extra-repos: |
            ovirt-3.5-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
            ovirt-3.5-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
            ci-tools,http://resources.ovirt.org/repos/ci-tools/$distro
      - el6:
          extra-packages: maven3
          extra-repos: |
            ovirt-3.5-snapshot,http://resources.ovirt.org/pub/ovirt-3.5-snapshot/rpm/$distro
            ovirt-3.5-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.5-snapshot-static/rpm/$distro
            epel6,http://download.fedoraproject.org/pub/epel/6/\\$basearch
            jpackage-6.0-generic,http://ftp.heanet.ie/pub/jpackage/6.0/generic/free
            ci-tools,http://resources.ovirt.org/repos/ci-tools/$distro
      - el7:
          extra-repos: |
            ovirt-3.5-snapshot,http://resources.ovirt.org/pub/ovirt-3.5-snapshot/rpm/$distro
            ovirt-3.5-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.5-snapshot-static/rpm/$distro
            ci-tools,http://resources.ovirt.org/repos/ci-tools/$distro
            epel7,http://download.fedoraproject.org/pub/epel/7/\\$basearch
    arch: x86_64
    extra-make-targets: |
      validations
    extra-build-packages: |
      make
      pyflakes
      python-pep8
      python-devel
      git
    wrappers:
      - copy-to-slave:
          includes: artifactory-ovirt-org-settings.xml
          relative-to: "${{JENKINS_HOME}}/userContent"
    extra-env: |
      CI_MAVEN_SETTINGS=\"/artifactory-ovirt-org-settings.xml\"
      BUILD_JAVA_OPTS_MAVEN=\"-XX:MaxPermSize=512M -Dgwt.compiler.localWorkers=1\"
      BUILD_JAVA_OPTS_GWT=\"-XX:PermSize=512M -XX:MaxPermSize=1024M -Xms1024M -Xmx4096M\"
      http_proxy=\"http://proxy.phx.ovirt.org:3128\"
    extra-rpmbuild-options: |
      \"ovirt_build_extra_flags=-gs \\${{CI_MAVEN_SETTINGS}} -X\"
      \"ovirt_build_ut=0\"
    copy-in: 'artifactory-ovirt-org-settings.xml:/'
    jobs:
      - 'ovirt-engine_{version}_create-rpms-{distro}-{arch}_{trigger}'

