- job-template:  &standard-template
    name: '{project}_{version}_{stage}-{distro}-{arch}'
    node: '{node-filter}'
    parameters:
      - gerrit-params:
          branch: '{branch}'
    scm:
      - '{project}-gerrit':
          git-server: '{git-server}'
      # Non-gerrit scm, me have to specify the branch
      - jenkins:
          branch: master
          git-server: '{git-server}'
    triggers:
      - '{stage}_trigger_{trigger}':
          project: '{project}'
          branch: '{branch}'
          trigger-times: '{trigger-times}'
          gerrit-server: '{gerrit-server}'
    builders:
      - cleanup-slave
      - '{stage}_builder':
          project: '{project}'
          distro: '{distro}'
          arch: '{arch}'
          extra-env: '{extra-env}'
          cherry-pick: '{cherry-pick}'
    publishers:
      - mock-cleanup
      - exported-artifacts

- job-template:
    << : *standard-template
    name: 'ovirt-appliance_{version}_{stage}-{distro}-{arch}'
    logrotate:
      numToKeep: 20
      artifactNumToKeep: 2
