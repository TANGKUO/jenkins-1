- job:
    name: jenkins_master_check-yaml_gerrit
    node: master
    parameters:
        - gerrit-params:
            branch: master
    triggers:
        - gerrit:
            trigger-on:
                - patchset-created-event:
                    exclude-drafts: true
                    exclude-no-code-change: true
            escape-quotes: true
            successful-message: 'You can check the diff in the job summary'
            projects:
                - project-compare-type: 'PLAIN'
                  project-pattern: 'jenkins'
                  branches:
                      - branch-compare-type: 'PLAIN'
                        branch-pattern: 'master'
                  file-paths:
                      - compare-type: 'REG_EXP'
                        pattern: 'jobs/confs/.*'
    scm:
        - jenkins-master-gerrit
    builders:
        - shell: !include-raw shell-scripts/jenkins_check_yaml.sh
    publishers:
        - archive:
            artifacts: '*.html'
