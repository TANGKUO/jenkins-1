- project:
    name: vdsm_master_install-rpm-sanity
    project: vdsm
    trigger: created
    version:
      - master:
          branch: master
    mock-build-type: onlyrpm
    distro:
      - fc22:
          extra-repos: |
              ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
              ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
              glusterfs-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/\\$basearch
              glusterfs-noarch-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/noarch
              fedora-virt-preview,http://fedorapeople.org/groups/virt/virt-preview/fedora-\\$releasever/\\$basearch
      - fc23:
          extra-repos: |
              ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
              ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
              fedora-virt-preview,http://fedorapeople.org/groups/virt/virt-preview/fedora-\\$releasever/\\$basearch
      - el7:
          extra-repos: |
              ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
              ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
              glusterfs-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/\\$basearch
              glusterfs-noarch-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/noarch
              openstack-juno,https://repos.fedorapeople.org/repos/openstack/openstack-juno/epel-7/
    arch: x86_64
    jobs:
      - '{project}_{version}_install-rpm-sanity-{distro}_{trigger}':
          trigger-files: 'vdsm.spec.in'
          extra-packages: ''
          extra-rpmbuild-options: |
            'with_check=0'
            'with_hooks=1'
          packages: 'exported-artifacts/vdsm-*rpm'
          env: 'NOSE_EXCLUDE=.*'

- project:
    name: vdsm_3.6_install-rpm-sanity
    project: vdsm
    trigger: created
    version:
      - 3.6:
          branch: ovirt-3.6
    mock-build-type: onlyrpm
    distro:
      - fc22:
          extra-repos: |
              ovirt-3.6-snapshot,http://resources.ovirt.org/pub/ovirt-3.6-snapshot/rpm/$distro
              ovirt-3.6-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.6-snapshot-static/rpm/$distro
              glusterfs-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/\\$basearch
              glusterfs-noarch-fedora,http://download.gluster.org/pub/gluster/glusterfs/LATEST/Fedora/fedora-\\$releasever/noarch
              fedora-virt-preview,http://fedorapeople.org/groups/virt/virt-preview/fedora-\\$releasever/\\$basearch
      - fc23:
          extra-repos: |
              ovirt-3.6-snapshot,http://resources.ovirt.org/pub/ovirt-3.6-snapshot/rpm/$distro
              ovirt-3.6-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.6-snapshot-static/rpm/$distro
              fedora-virt-preview,http://fedorapeople.org/groups/virt/virt-preview/fedora-\\$releasever/\\$basearch
      - el7:
          extra-repos: |
              ovirt-3.6-snapshot,http://resources.ovirt.org/pub/ovirt-3.6-snapshot/rpm/$distro
              ovirt-3.6-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.6-snapshot-static/rpm/$distro
              glusterfs-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/\\$basearch
              glusterfs-noarch-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/noarch
    arch: x86_64
    jobs:
      - '{project}_{version}_install-rpm-sanity-{distro}_{trigger}':
          trigger-files: 'vdsm.spec.in'
          extra-packages: ''
          extra-rpmbuild-options: |
            'with_check=0'
            'with_hooks=1'
          packages: 'exported-artifacts/vdsm-*rpm'
          env: 'NOSE_EXCLUDE=.*'

- project:
    name: vdsm_3.5_install-rpm-sanity
    project: vdsm
    trigger: created
    version:
      - 3.5:
          branch: ovirt-3.5
    mock-build-type: onlyrpm
    distro:
      - el7:
          extra-repos: |
              ovirt-3.5-snapshot,http://resources.ovirt.org/pub/ovirt-3.5-snapshot/rpm/$distro
              ovirt-3.5-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.5-snapshot-static/rpm/$distro
              glusterfs-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/\\$basearch
              glusterfs-noarch-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/noarch
      - el6:
          extra-repos: |
              ovirt-3.5-snapshot,http://resources.ovirt.org/pub/ovirt-3.5-snapshot/rpm/$distro
              ovirt-3.5-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.5-snapshot-static/rpm/$distro
              glusterfs-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/\\$basearch
              glusterfs-noarch-epel,http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-\\$releasever/noarch
    arch: x86_64
    jobs:
      - '{project}_{version}_install-rpm-sanity-{distro}_{trigger}':
          trigger-files: 'vdsm.spec.in'
          extra-packages: ''
          extra-rpmbuild-options: |
            'with_check=0'
            'with_hooks=1'
          packages: 'exported-artifacts/vdsm-*rpm'
          env: 'NOSE_EXCLUDE=.*'
