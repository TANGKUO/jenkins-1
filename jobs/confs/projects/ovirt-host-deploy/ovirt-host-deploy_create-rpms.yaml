- project:
    name: ovirt-host-deploy_create-rpms
    project:
      - ovirt-host-deploy
    trigger:
      - merged
      - created
    version:
      - master:
          extra-repos: |
            ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
            ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
          branch: master
      - 3.5:
          extra-repos: |
            ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-3.5-snapshot/rpm/$distro
            ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.5-snapshot-static/rpm/$distro
          branch: ovirt-host-deploy-1.3
    mock-build-type: all
    distro:
      - el7
      - fc21
      - fc22
    arch: x86_64
    extra-configure-options: |
      --with-otopi-sources=/dev/null
    extra-build-packages: |
      gettext-devel
      automake
      autoreconf
      make
    extra-make-targets: |
      offline-tarball
    jobs:
      - '{project}_{version}_create-rpms-{distro}-{arch}_{trigger}'

# On EL6 build ovirt-host-deploy-offline only on 3.5 branch
- project:
    name: ovirt-host-deploy_create-rpms_el6
    project:
      - ovirt-host-deploy
    trigger:
      - merged
      - created
    version:
      - master:
          extra-repos: |
            ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-master-snapshot/rpm/$distro
            ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-master-snapshot-static/rpm/$distro
          branch: master
      - 3.5:
          extra-repos: |
            ovirt-master-snapshot,http://resources.ovirt.org/pub/ovirt-3.5-snapshot/rpm/$distro
            ovirt-master-snapshot-static,http://resources.ovirt.org/pub/ovirt-3.5-snapshot-static/rpm/$distro
          branch: ovirt-host-deploy-1.3
          extra-make-targets: |
            offline-tarball
    mock-build-type: all
    distro:
      - el6
    arch: x86_64
    extra-configure-options: |
      --with-otopi-sources=/dev/null
    extra-build-packages: |
      gettext-devel
      automake
      autoreconf
      make
    jobs:
      - '{project}_{version}_create-rpms-{distro}-{arch}_{trigger}'
